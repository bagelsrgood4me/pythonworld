<source>
  @type forward
  port 24224
  <parse>
    @type json
    keep_time_key true
    time_format %Y-%m-%dT%H:%M:%S.%N%z
    time_key timestamp
    key_name "$.log"
    hash_value_field "log"
    reserve_data true
  </parse>
</source>

<match **>
  @type elasticsearch
  host elasticsearch
  port 9200
  logstash_format true
  logstash_prefix fluentd
  logstash_dateformat %Y%m%d
  include_tag_key true
  type_name access_log
  tag_key @log_name
  flush_interval 1s
  index_name fluentd
  type_name fluentd
</match>